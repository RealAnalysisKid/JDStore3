<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="navbar-header">
    <!--=== Logo ===-->
    <a class="navbar-brand default-logo scroll" href="/">
      哆啦A梦的百宝箱
    </a>
  </div>

  <!-- Brand and toggle get grouped for better mobile display -->
  <div class="collapse navbar-collapse top-nav" id="menu-4">
    <!--=== 网站连结 ===-->
    <ul class="nav navbar-nav navbar-left">
      <li class="active">
        <%= link_to("宝物", products_path) %>
      </li>
    </ul>

    <!--=== 帐号操作 ===-->

    <ul class="nav navbar-nav navbar-right">

      <!--购物车--->
      <li>
        <%= link_to fa_icon("shopping-cart", text: "购物车（#{current_cart.products.count}）"), carts_path  %>
      </li>

      <!-- 未登录者使用下拉式選單 -->
      <% if !current_user %>
      <!-- 訪客註冊 / 登入 -->
      <li><%= link_to(t('注册'), new_user_registration_path) %></li>
      <li><%= link_to(t('登录'), new_user_session_path) %></li>

      <!-- 已经登录者使用下拉式選單 -->
    <% else %>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
          <%= current_user.email %>
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <% if current_user.admin? %>
          <li>
            <%= link_to("Admin 选单", admin_products_path ) %>
          </li>
          <li class="divider"></li>
          <% end %>
          <li>
            <%= link_to("个人订单列表", account_orders_path ) %>
          </li>

          <li class="divider"></li>
          <li>
            <a rel="nofollow" data-method="delete" href="/users/sign_out">登出</a>
          </li>
        </ul>
      </li>
      <% end %>
    </ul>

    <%= form_tag products_path, class: "nav navbar-form navbar-right" do %>
    <div class="input-group">
      <input type="text" name="query" value="<%= params[:query] %>" class="form-control" placeholder="搜索商品">
      <span class="input-group-btn">
        <button type="submit" name="button" class="btn btn-default">
          <i class="fa fa-search"></i>
        </button>
      </span>
    </div>
    <% end %>
  </div>
</nav>
